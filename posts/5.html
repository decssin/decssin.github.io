<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>@jiwon.blog</title>
	<link rel="icon" type="image/png" href="../favicon.ico">
	<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="194x194" href="../favicon-194x194.png">
	<link rel="icon" type="image/png" sizes="192x192" href="../android-chrome-192x192.png">
	<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
	<link rel="manifest" href="../site.webmanifest">
	<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
	<meta name="apple-mobile-web-app-title" content="@jiwon.blog">
	<meta name="application-name" content="@jiwon.blog">
	<meta name="msapplication-TileColor" content="#000000">
	<meta name="msapplication-TileImage" content="../mstile-144x144.png">
	<meta name="theme-color" content="#000000">
	
	<link rel="stylesheet" href="../assets/index.css" />
	
	<noscript>
		<div id="noscript" class="display-flex">
			Your browser does not support JavaScript!
		</div>
	</noscript>
</head>
<body>
	<div id="wrap" class="margin-0-auto position-relative">
		<!-- menu -->
		<div class="open-menu display-flex position-fixed width-100 height-100 top-0 left-0" style="opacity:0;visibility:hidden;">
			<ul class="menu-list">
				<li><a class="cursor-pointer" href="https://jiwon.blog">blog</a></li>
				<li><a class="cursor-pointer" href="https://jiwon.blog/gallery/hall">gallery</a></li>
				<li><a class="cursor-pointer" href="https://jiwon.blog/calendar/cover">calendar</a></li>
				<li><br/></li>
				<li><a class="cursor-pointer" href="https://jiwon.blog/about/me">about me</a></li>
				<li><span class="cursor-pointer" onclick="toggleTheme()">day/night</span></li>
			</ul>
		</div>
		
		<!-- header -->
		<div id="header" class="width-100 position-fixed top-0 left-0 cursor-pointer" onclick="window.scrollTo({top:0,behavior:'smooth'})">
			<div class="header-wrap display-flex width-100 height-100 position-relative margin-0-auto">
				<div class="menu-button display-flex cursor-pointer" onclick="toggleMenu()">
					<div class="line width-100"></div>
					<div class="line width-100"></div>
					<div class="line width-100"></div>
				</div>
				<a class="title cursor-pointer" href="https://jiwon.blog" onclick="window.event.stopPropagation()">@jiwon.blog</a>
				<div class="search-form display-flex position-absolute top-0" style="width:0;" onclick="event.stopPropagation()">
					<input type="text" class="search-input position-relative" title="search input" onkeyup="searchPosts(this)">
				</div>
				<div class="search-posts position-relative"></div>
			</div>
		</div>

		<!-- main content -->
		<div id="content">
            <div class="title">Docker 설치 및 실행</div>
            <div class="info">2021. 01. 20 by Jiwon Min</br>Wed Jan 20 2021 (Korea Standard Time)</div>

            <div class="explain">
                
도커(Docker)는 버추얼 박스(Virtual Box)와 사용자 측면에서 비슷하면서, 소프트웨어 측면에서 다른 오픈 소스 프로젝트입니다. 
두 소프트웨어가 이미지를 가상화 공간에 띄워 여러 운영체제를 다룰 수 있게 해준다는 면에서 비슷한 점이 많지만, 가상화 방식에서 차이가 있습니다. 

<br/>
<br/>


운영체제를 가상화하지 않는 컨테이너 기술인 만큼 가상머신에 비해서 가벼우며, VM을 포함하여 한대의 서버에 여러개의 서비스를 구동하기 좋습니다. 
보안상, 서비스가 해커에 노출되더라도 원래의 서버에 영향을 미치기가 쉽지 않은 격리된 구조인 만큼, 가상화의 장점을 상당 부분 활용할 수 있다. 
가상머신과 달리, 기존 리눅스 자원을 그대로 활용할 수 있어서 여러 서비스들을 한 서버에 돌리기가 좋은 편입니다. 
구글의 쿠버네티스가 도커 기술 기반으로 시작되었습니다.

<br/>
<br/>

<h3>도커 준비</h3>

<ul>
<li><a href="https://docs.docker.com/install/" title="도커 설치" target="_blank">도커 설치</a></li>
<li><a href="https://hub.docker.com/_/ubuntu/" title="Ubuntu 이미지" target="_blank">도커 허브 Ubuntu 이미지</a></li>
<li><a href="https://hub.docker.com/r/mattrayner/lamp" title="LAMP 이미지" target="_blank">도커 허브 LAMP 이미지</a></li>
</ul>

<h3>도커 컨테이너 생성 및 실행 </h3>

<pre>
# -t : 터미널 모드 사용
# -i : 표준 입력을 받을 수 있게 함
# -v : 호스트의 디렉토리와 컨테이너의 디렉토리를 공유시킴
# bash : bash 사용
<code>$ docker run -i -t -p 443:443 -p 80:80 ubuntu:18.04 bash</code>
</pre>

<h3>도커 그 외 명령어</h3>                
<pre>
<code>docker images</code> # 이미지 목록
<code>docker ps -a</code> # 컨테이너 목록
<code>docker rename `old` `new`</code> # 컨테이너 이름 변경
<code>docker start `name`</code> # 컨테이너 실행 [start, restart, stop]
<code>docker attach `name`</code> # 컨테이너에 접속하기
<code>docker rm `container id`</code> # 컨테이너 삭제
<code>docker rmi `image id`</code> # 이미지 삭제
</pre>

<h3>도커 무중단 쉘 빠져나오기</h3>                
<ul>
<li><code>Ctrl + P</code>, <code>Ctrl + Q</code></li>
<li>단, <code>docker run -it</code> 으로 실행한 경우에 한함</li>
</ul>

<h3>외부에서 컨테이너 안의 명령 실행하기</h3>
<pre>
# 실행 중인 컨테이너에만 사용 가능
<code>docker exec `container name` `command`</code>
<code>docker exec `container name` service httpd restart</code>
</pre>

<h3>배포용 도커 이미지 만들기</h3>

<pre>
<code>$ docker run -i -t -p 443:443 -p 80:80 --name `container-name` ubuntu:18.04 bash</code>
<code>$ docker commit `container-name` `id`/ubuntu:18.04</code>
<code>$ docker push laladock/ubuntu:18.04</code>

# 이후 변화가 생길 시, 다시 커밋 후 배포
<code>$ docker commit `container-name` `id`/ubuntu:18.05</code>
<code>$ docker push `id`/ubuntu:18.05</code>
</pre>

<h3>도커로 공유받은 개발 환경 구축하기</h3>                
<pre>
<code>$ docker run -i -t -p 443:443 -p 80:80 -v `project-path`:`remote-path` `id`/ubuntu:18.04 bash</code>
<code>$ docker run -i -t -p 443:443 -p 80:80 -p 3306:3306 --name `container-name` -v `project-path`:`remote-path` `id`/ubuntu:18.04 bash​</code>
</pre>

<h3>도커 허브에 있는 기존 이미지 사용하기</h3>                
<pre>
# mattrayner/lamp 이미지 사용

# mysql 비밀번호는 최초 생성 시 표시됩니다.
<code>$ docker run --name "project" -p "80:80" -v /c/dev/workspace/project:/var/www/html mattrayner/lamp:latest</code>

# mysql 접근 (localhost/phpmyadmin/index.php 으로 접근 가능)
<code>mysql -uadmin -p`PASSWORD` -h`HOST` -P`PORT`</code>
</pre>

            </div>
		</div>

		<!-- footer -->
		<div id="footer" class="display-flex position-absolute bottom-0 left-0">
			<div class="rights">
				&copy; 2021 <a href="javascript:void(0)" title="Jiwon Min">Jiwon Min</a>. All rights reserved.
			</div>
			<div class="design">
				Designed by <a href="javascript:void(0)" title="Jiwon Min">Jiwon Min</a>.
			</div>
		</div>
	</div>

    <script src="../assets/index.js" type="text/javascript"></script>
</body>
</html>